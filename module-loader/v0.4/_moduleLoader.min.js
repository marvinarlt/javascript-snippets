moduleLoader({
    "*": {
        "modules": ["/js/myfile.js"],
        "callback": "always"
    }
}, false);

function always()
{
    console.log('always');
}

/**
 * Module Loader - Load scripts only when needed
 * 
 * @author Marvin Arlt
 * @date 2020-06-30
 * @version 0.4
 */
function moduleLoader(e,o){const n=function(e,n){if((void 0===e||0===e.length||""===e[0])&&"function"==typeof n)return n(),void(o&&console.info("moduleLoader: Callback function executed"));for(let t=0;t<e.length;t++){const l=e[t],c=l.split("."),d=c[c.length-1],i=location.origin+l;let r=null;"css"===d&&((r=document.createElement("link")).rel="stylesheet",r.href=i,document.head.appendChild(r)),"js"===d&&((r=document.createElement("script")).defer="defer",r.src=i,document.body.appendChild(r)),r.onload=function(){if(o&&console.info("moduleLoader: "+l+" loaded"),"function"==typeof n){try{n()}catch(e){o&&console.error(e)}o&&console.info("moduleLoader: Callback function executed ["+l+"]")}}}};for(let o in e){if(null===document.querySelector(o))continue;let t=e[o].modules,l=e[o].callback;"string"==typeof l&&(l=window[l]),n(t,l)}}