moduleLoader({
    "*": {
        "modules": ["/js/myfile.js"],
        "callback": "always"
    }
}, false, {domain: true});

function always()
{
    console.log('always');
}

/**
 * Module Loader - Load scripts only when needed
 * 
 * @author Marvin Arlt
 * @date 2020-07-16
 * @version 0.4.2
 */
function moduleLoader(e,o,n){const t=function(e,t){if((void 0===e||0===e.length||""===e[0])&&"function"==typeof t)return t(),void(o&&console.info("moduleLoader: Callback function executed"));for(let l=0;l<e.length;l++){const c=e[l],d=c.split("."),i=d[d.length-1],r=void 0!==n&&n.domain?location.origin+c:c;let u=null;"css"===i&&((u=document.createElement("link")).rel="stylesheet",u.href=r,document.head.appendChild(u)),"js"===i&&((u=document.createElement("script")).defer="defer",u.src=r,document.body.appendChild(u)),l===e.length-1&&(u.onload=function(){if(o&&console.info("moduleLoader: "+c+" loaded"),"function"==typeof t){try{t()}catch(e){o&&console.error(e)}o&&console.info("moduleLoader: Callback function executed ["+c+"]")}})}};for(let o in e){if(null===document.querySelector(o))continue;let n=e[o].modules,l=e[o].callback;"string"==typeof l&&(l=window[l]),t(n,l)}}