moduleLoader({
    "*": {
        "modules": ["/js/myfile.js"],
        "callback": "always"
    }
}, false, {domain: true});

function always()
{
    console.log('always');
}

/**
 * Module Loader - Load scripts only when needed
 * 
 * @author Marvin Arlt
 * @date 2020-07-19
 * @version 0.5
 */
function moduleLoader(e,o,n){let l=[],d=[];const t=function(e,l,d){let c=e[d],i=-1==c.indexOf("css")?"js":"css",u=void 0!==n&&n.domain?location.origin+c:c,r=null;"css"===i&&((r=document.createElement("link")).rel="stylesheet",r.href=u,document.head.appendChild(r)),"js"===i&&((r=document.createElement("script")).defer="defer",r.src=u,document.body.appendChild(r)),r.onload=function(){if(o&&console.info("moduleLoader: "+c+" loaded"),d<e.length-1)t(e,l,d+1);else for(let e in l)l[e](),o&&console.info("moduleLoader: Callback function(s) executed")},r.onerror=function(){o&&console.info("moduleLoader: Could not load module ["+c+"]"),d<e.length-1&&t(e,l,d+1)}};for(let n in e){if(null===document.querySelector(n)){o&&console.info('moduleLoader: Selector "'+n+'" not found.');continue}let t=e[n].callback,c=e[n].modules;t="string"==typeof t?window[t]:t,d.push(t);for(let e in c)-1==l.indexOf(c[e])&&l.push(c[e])}t(l,d,0)}