const SETTINGS = {
  basePath: '/assets/js/',
  domain: true,
  debug: false
};

const MODULES = {
  '*': {
    'callback': function () {
      console.log('loaded');
    }
  }
};

new Loader(MODULES, SETTINGS);

/**
 * Loader
 * 
 * @version 0.6.1
 * 
 * @param {object} modulesAndCallbacks
 * @param {object} settings
 * 
 * @return {object}
 */
function Loader(e,t){const s=this;this._defaultSettings={basePath:"/",domain:!1,debug:!1},this._modules=[],this._callbacks=[],this.construct=function(e,t){this.settings=Object.assign(this._defaultSettings,t),this.setModulesAndCallbacks(e),this._modules.length>0&&this.load(0)},this.setModulesAndCallbacks=function(e){for(let t in e){if(null===document.querySelector(t)){this.settings.debug&&console.info('moduleLoader: Selector "'+t+'" not found.');continue}let s=e[t].modules,n=e[t].callback;void 0!==s&&s.length>0&&this._modules.push(...s),void 0!==n&&(n="string"==typeof n?window[n]:n,this._callbacks.push(n))}},this.load=function(e){let t=this.settings.basePath+this._modules[e],n=-1!==t.indexOf("js")?"js":"css",o=this.settings.domain?location.origin+t:t,l=this.getElement(o,n);null!==l?(l.onload=function(){s.settings.debug&&console.info("moduleLoader: "+t+" loaded"),e!==s._modules.length-1?s.load(e+1):s.executeCallbacks()},l.onerror=function(){s.settings.debug&&console.info("moduleLoader: Could not load module ["+t+"]"),e!==s._modules.length&&s.load(e+1)}):this.load(e+1)},this.getElement=function(e,t){let s=null;switch(t){case"js":(s=document.createElement("script")).defer="defer",s.src=e;break;case"css":(s=document.createElement("link")).rel="stylesheet",s.href=e}return null===s?(this.settings.debug&&console.info('moduleLoader: Unknown extension "'+t+'"'),null):(document.body.appendChild(s),s)},this.executeCallbacks=function(){let e=this._callbacks;for(let t in e)e[t](),this.settings.debug&&console.info("moduleLoader: Callback function(s) executed")},this.construct(e,t)}